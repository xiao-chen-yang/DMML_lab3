<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 LDA and QDA: Iris dataset | STATS5099 Data Mining and Machine Learning</title>
  <meta name="description" content="3 LDA and QDA: Iris dataset | STATS5099 Data Mining and Machine Learning" />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="3 LDA and QDA: Iris dataset | STATS5099 Data Mining and Machine Learning" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 LDA and QDA: Iris dataset | STATS5099 Data Mining and Machine Learning" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="k-nn-classification-iris-dataset.html"/>
<link rel="next" href="exercise-haberman.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="include/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome to DMML Lab 3</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#k-nn"><i class="fa fa-check"></i><b>1.1</b> k-NN</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#linear-and-quadratic-discriminant-analysis"><i class="fa fa-check"></i><b>1.2</b> Linear and quadratic discriminant analysis</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="k-nn-classification-iris-dataset.html"><a href="k-nn-classification-iris-dataset.html"><i class="fa fa-check"></i><b>2</b> k-NN classification: Iris dataset</a>
<ul>
<li class="chapter" data-level="2.1" data-path="k-nn-classification-iris-dataset.html"><a href="k-nn-classification-iris-dataset.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>2.1</b> Exploratory data analysis </a></li>
<li class="chapter" data-level="2.2" data-path="k-nn-classification-iris-dataset.html"><a href="k-nn-classification-iris-dataset.html#classification-using-k-nn"><i class="fa fa-check"></i><b>2.2</b> Classification using k-NN</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="k-nn-classification-iris-dataset.html"><a href="k-nn-classification-iris-dataset.html#data-splitting"><i class="fa fa-check"></i><b>2.2.1</b> Data splitting</a></li>
<li class="chapter" data-level="2.2.2" data-path="k-nn-classification-iris-dataset.html"><a href="k-nn-classification-iris-dataset.html#distances"><i class="fa fa-check"></i><b>2.2.2</b> Distances</a></li>
<li class="chapter" data-level="2.2.3" data-path="k-nn-classification-iris-dataset.html"><a href="k-nn-classification-iris-dataset.html#finding-the-optimal-value-of-k"><i class="fa fa-check"></i><b>2.2.3</b> Finding the optimal value of k</a></li>
<li class="chapter" data-level="2.2.4" data-path="k-nn-classification-iris-dataset.html"><a href="k-nn-classification-iris-dataset.html#prediction"><i class="fa fa-check"></i><b>2.2.4</b> Prediction</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="k-nn-classification-iris-dataset.html"><a href="k-nn-classification-iris-dataset.html#task"><i class="fa fa-check"></i><b>2.3</b> Task</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lda-and-qda-iris-dataset.html"><a href="lda-and-qda-iris-dataset.html"><i class="fa fa-check"></i><b>3</b> LDA and QDA: Iris dataset</a>
<ul>
<li class="chapter" data-level="3.1" data-path="lda-and-qda-iris-dataset.html"><a href="lda-and-qda-iris-dataset.html#checking-assumptions"><i class="fa fa-check"></i><b>3.1</b> Checking assumptions</a></li>
<li class="chapter" data-level="3.2" data-path="lda-and-qda-iris-dataset.html"><a href="lda-and-qda-iris-dataset.html#lda"><i class="fa fa-check"></i><b>3.2</b> LDA</a></li>
<li class="chapter" data-level="3.3" data-path="lda-and-qda-iris-dataset.html"><a href="lda-and-qda-iris-dataset.html#task-1"><i class="fa fa-check"></i><b>3.3</b> Task</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exercise-haberman.html"><a href="exercise-haberman.html"><i class="fa fa-check"></i><b>4</b> Exercise: Haberman</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">STATS5099 Data Mining and Machine Learning</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lda-and-qda-iris-dataset" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> LDA and QDA: Iris dataset<a href="lda-and-qda-iris-dataset.html#lda-and-qda-iris-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Let's continue the analysis on Iris dataset, but now using discriminant analysis.</p>
<div id="checking-assumptions" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Checking assumptions<a href="lda-and-qda-iris-dataset.html#checking-assumptions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>ggpairs</code> plot produced in previous section suggests that the Gaussian assumption is roughly satisfied. In addition, we also need to check if the groups have equal covariance.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="lda-and-qda-iris-dataset.html#cb23-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb23-2"><a href="lda-and-qda-iris-dataset.html#cb23-2" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">colnames</span>(iris)[i],<span class="at">sep=</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb23-3"><a href="lda-and-qda-iris-dataset.html#cb23-3" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">aggregate</span>(iris[,i],<span class="at">by=</span><span class="fu">list</span>(iris<span class="sc">$</span>Species),var)) <span class="co">#compute variance for each group</span></span>
<span id="cb23-4"><a href="lda-and-qda-iris-dataset.html#cb23-4" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## Sepal.Length
##      Group.1      x
## 1     setosa 0.1242
## 2 versicolor 0.2664
## 3  virginica 0.4043
## Sepal.Width
##      Group.1       x
## 1     setosa 0.14369
## 2 versicolor 0.09847
## 3  virginica 0.10400
## Petal.Length
##      Group.1       x
## 1     setosa 0.03016
## 2 versicolor 0.22082
## 3  virginica 0.30459
## Petal.Width
##      Group.1       x
## 1     setosa 0.01111
## 2 versicolor 0.03911
## 3  virginica 0.07543</code></pre>
<p>Results suggest that considerable differences in the variances for Sepal Length and Petal Length. Therefore, it may not be very appropriate to apply LDA. Nonetheless, to illustrate how LDA and QDA works, we will run both models in this example.</p>
</div>
<div id="lda" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> LDA<a href="lda-and-qda-iris-dataset.html#lda" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Since there is no parameter to select in LDA or QDA, we only need to split the data into training and test sets.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="lda-and-qda-iris-dataset.html#cb25-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb25-2"><a href="lda-and-qda-iris-dataset.html#cb25-2" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(iris)</span>
<span id="cb25-3"><a href="lda-and-qda-iris-dataset.html#cb25-3" tabindex="-1"></a>ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span>n), <span class="fu">floor</span>(<span class="fl">0.8</span><span class="sc">*</span>n))</span>
<span id="cb25-4"><a href="lda-and-qda-iris-dataset.html#cb25-4" tabindex="-1"></a>iris.train <span class="ot">&lt;-</span> iris[ind,]</span>
<span id="cb25-5"><a href="lda-and-qda-iris-dataset.html#cb25-5" tabindex="-1"></a>iris.test  <span class="ot">&lt;-</span> iris[<span class="sc">-</span>ind,]</span></code></pre></div>
<p>Next, we implement LDA by using the <code>lda</code> function.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="lda-and-qda-iris-dataset.html#cb26-1" tabindex="-1"></a><span class="fu">library</span>(MASS)</span>
<span id="cb26-2"><a href="lda-and-qda-iris-dataset.html#cb26-2" tabindex="-1"></a>iris.lda <span class="ot">&lt;-</span> <span class="fu">lda</span>(Species<span class="sc">~</span>., <span class="at">data=</span>iris.train)</span>
<span id="cb26-3"><a href="lda-and-qda-iris-dataset.html#cb26-3" tabindex="-1"></a>iris.lda </span></code></pre></div>
<pre><code>## Call:
## lda(Species ~ ., data = iris.train)
## 
## Prior probabilities of groups:
##     setosa versicolor  virginica 
##     0.3250     0.3167     0.3583 
## 
## Group means:
##            Sepal.Length Sepal.Width Petal.Length Petal.Width
## setosa            5.008       3.421        1.462      0.2513
## versicolor        5.976       2.768        4.308      1.3211
## virginica         6.647       2.984        5.595      2.0442
## 
## Coefficients of linear discriminants:
##                  LD1     LD2
## Sepal.Length  0.7682 -0.1347
## Sepal.Width   1.6720 -2.0470
## Petal.Length -2.2383  1.0337
## Petal.Width  -2.7061 -2.9118
## 
## Proportion of trace:
##    LD1    LD2 
## 0.9906 0.0094</code></pre>
<p>Since we have three classes, two (<span class="math inline">\(3-1\)</span>) linear discriminant functions are produced. We could see how the first linear discriminant function separates the three classes by using <code>ldahist</code> function or by using <code>ggplot</code>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="lda-and-qda-iris-dataset.html#cb28-1" tabindex="-1"></a>iris.pred.tr <span class="ot">&lt;-</span> <span class="fu">predict</span>(iris.lda)</span>
<span id="cb28-2"><a href="lda-and-qda-iris-dataset.html#cb28-2" tabindex="-1"></a><span class="fu">ldahist</span>(<span class="at">data =</span> iris.pred.tr<span class="sc">$</span>x[,<span class="dv">1</span>], <span class="at">g=</span>iris.train<span class="sc">$</span>Species)</span></code></pre></div>
<p><img src="main_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="lda-and-qda-iris-dataset.html#cb29-1" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Type=</span>iris.train<span class="sc">$</span>Species, <span class="at">lda=</span>iris.pred.tr<span class="sc">$</span>x)</span>
<span id="cb29-2"><a href="lda-and-qda-iris-dataset.html#cb29-2" tabindex="-1"></a><span class="fu">ggplot</span>(dataset, <span class="fu">aes</span>(<span class="at">x=</span>lda.LD1)) <span class="sc">+</span> </span>
<span id="cb29-3"><a href="lda-and-qda-iris-dataset.html#cb29-3" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">group=</span>Type, <span class="at">colour=</span>Type, <span class="at">fill=</span>Type), <span class="at">alpha=</span><span class="fl">0.3</span>)</span></code></pre></div>
<p><img src="main_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>The first linear discriminant is quite effective in separating setosa from the other classes, but less effective in separating versicolor and virginica.</p>
<p>While <code>R</code> could automatically help us make predictions, let's try to manually create a classification rule using only LD1 based on the figure above.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="lda-and-qda-iris-dataset.html#cb30-1" tabindex="-1"></a><span class="co"># The classification rule is manually designed as follows:</span></span>
<span id="cb30-2"><a href="lda-and-qda-iris-dataset.html#cb30-2" tabindex="-1"></a><span class="co"># classify observations to virginica  if LD1 &lt; -3.5;</span></span>
<span id="cb30-3"><a href="lda-and-qda-iris-dataset.html#cb30-3" tabindex="-1"></a><span class="co"># classify observations to versicolor if -3.5 &lt;= LD1 &lt;= 3;</span></span>
<span id="cb30-4"><a href="lda-and-qda-iris-dataset.html#cb30-4" tabindex="-1"></a><span class="co"># classify observations to setosa     if LD1 &gt; 3</span></span>
<span id="cb30-5"><a href="lda-and-qda-iris-dataset.html#cb30-5" tabindex="-1"></a>pred.LD1 <span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="st">&quot;versicolor&quot;</span>,<span class="fu">nrow</span>(iris.train))</span>
<span id="cb30-6"><a href="lda-and-qda-iris-dataset.html#cb30-6" tabindex="-1"></a>pred.LD1[iris.pred.tr<span class="sc">$</span>x[,<span class="dv">1</span>] <span class="sc">&lt;</span> <span class="sc">-</span><span class="fl">3.5</span>] <span class="ot">&lt;-</span> <span class="st">&quot;virginica&quot;</span></span>
<span id="cb30-7"><a href="lda-and-qda-iris-dataset.html#cb30-7" tabindex="-1"></a>pred.LD1[iris.pred.tr<span class="sc">$</span>x[,<span class="dv">1</span>] <span class="sc">&gt;</span>  <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;setosa&quot;</span></span>
<span id="cb30-8"><a href="lda-and-qda-iris-dataset.html#cb30-8" tabindex="-1"></a><span class="fu">mean</span>(pred.LD1<span class="sc">==</span>iris.train<span class="sc">$</span>Species)</span></code></pre></div>
<pre><code>## [1] 0.9833</code></pre>
<p>This shows that we have a correct classification rate of 98.3% on the training data.</p>
<p><em>Challenge: How might you decide the optimal cutting points instead of using <span class="math inline">\(-3.5\)</span> and <span class="math inline">\(3\)</span> in the classification rule above?</em></p>
<p>Let's now move to using two linear discriminant functions and see if that improves the classification accuracy. First, we could visualise how LD1 and LD2 together separate the three classes by using either of the following two comments</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="lda-and-qda-iris-dataset.html#cb32-1" tabindex="-1"></a><span class="co"># plot(iris.pred.tr$x[,1],iris.pred.tr$x[,2], col=train.data$Species,</span></span>
<span id="cb32-2"><a href="lda-and-qda-iris-dataset.html#cb32-2" tabindex="-1"></a><span class="co">#      pch=as.numeric(train.data$Species), xlab=&quot;LD1&quot;, ylab=&quot;LD2&quot;)</span></span>
<span id="cb32-3"><a href="lda-and-qda-iris-dataset.html#cb32-3" tabindex="-1"></a><span class="fu">ggplot</span>(dataset, <span class="fu">aes</span>(<span class="at">x=</span>lda.LD1, <span class="at">y=</span>lda.LD2)) <span class="sc">+</span> </span>
<span id="cb32-4"><a href="lda-and-qda-iris-dataset.html#cb32-4" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">group=</span>Type, <span class="at">colour=</span>Type, <span class="at">shape=</span>Type))</span></code></pre></div>
<p><img src="main_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>Now let's compute the correct classification rate again, but using both LD1 and LD2.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="lda-and-qda-iris-dataset.html#cb33-1" tabindex="-1"></a><span class="fu">mean</span>(iris.train<span class="sc">$</span>Species <span class="sc">==</span> iris.pred.tr<span class="sc">$</span>class)</span></code></pre></div>
<pre><code>## [1] 0.975</code></pre>
<p>The correct classification rate even decreases slightly compared with using LD1.</p>
<p>Finally, let's use the built LDA to predict species for test data. The correct classification rate is 100%, great!</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="lda-and-qda-iris-dataset.html#cb35-1" tabindex="-1"></a>iris.pred.te <span class="ot">&lt;-</span> <span class="fu">predict</span>(iris.lda, iris.test) </span>
<span id="cb35-2"><a href="lda-and-qda-iris-dataset.html#cb35-2" tabindex="-1"></a><span class="fu">mean</span>(iris.test<span class="sc">$</span>Species <span class="sc">==</span> iris.pred.te<span class="sc">$</span>class)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
</div>
<div id="task-1" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Task<a href="lda-and-qda-iris-dataset.html#task-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Implement QDA and compute the correct classification rate on the test set.</p>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="lda-and-qda-iris-dataset.html#cb37-1" tabindex="-1"></a>iris.qda <span class="ot">&lt;-</span> <span class="fu">qda</span>(Species<span class="sc">~</span>., <span class="at">data=</span>iris.train)</span>
<span id="cb37-2"><a href="lda-and-qda-iris-dataset.html#cb37-2" tabindex="-1"></a>iris.pred.te2 <span class="ot">&lt;-</span> <span class="fu">predict</span>(iris.qda, iris.test)</span>
<span id="cb37-3"><a href="lda-and-qda-iris-dataset.html#cb37-3" tabindex="-1"></a><span class="fu">mean</span>(iris.test<span class="sc">$</span>Species <span class="sc">==</span> iris.pred.te2<span class="sc">$</span>class)</span></code></pre></div>
<pre><code>## [1] 0.9667</code></pre>
</div>

</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="k-nn-classification-iris-dataset.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exercise-haberman.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["main.pdf", "main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
